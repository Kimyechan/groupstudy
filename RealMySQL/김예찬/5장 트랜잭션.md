# 5장 트랜잭션

- 트랜젝션
    - 논리적인 작업 셋을 모두 완벽하게 처리하거나
        
        처리하지 못할 경우에는 원 상대로 복구한다
        
    - 작업의 완전성을 보장
    - 데이터의 정합성을 보장
- 잠금
    - 여러 커넥션에서 동시에 동일한 자원을 요청할 경우
        
        순서대로 한 시점에 하나의 커넥션만 변경할 수 있게해준다
        
    - 동시성을 제어하기 위한 기능

## 잠금

- MySQL 엔진 레벨 잠금 : 잠금이 모든 스토리지 엔진에 영향을 준다
- 스토리지 엔진 레벨 잠금 : 스토리지 엔진 간 상호 영향을 미치지 않는다

### MySQL 엔진의 잠금

1. 글로벌 락
    - 한 세션에서 글로벌 락을 획득하면 다른 세션에서 select 제외한 대부분의 DDL, DML 문장이 락 걸린다
    - 영향을 미치는 범위는 MySQL 서버 전체
2. 테이블 락
    - 개별 테이블 단위로 설정되는 잠금
    - InnoDB에서는 스키마를 변경하는 DDL의 경우에만
3. 네임드 락
    - 여러 대의 웹 서비스가 상호 동기화를 처리해야할 때 사용
    - 배치 프로그램에서 동일 데이터를 변경하거나 참조하는 프로그램끼리 분류해서
        
        네임드 락을 걸고 쿼리를 실행하면 간단히 해결 가능하다
        
4. 메타데이터 락
    - 데이터베이스 객체(테이블 or 뷰)의 이름이나 구조를 변경하는 경우 획득하는 잠금